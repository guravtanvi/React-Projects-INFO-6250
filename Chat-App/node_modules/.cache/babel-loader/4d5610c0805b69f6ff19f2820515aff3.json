{"ast":null,"code":"var _jsxFileName = \"D:\\\\Information System\\\\info6250\\\\assignments\\\\react-chat\\\\src\\\\App.jsx\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { fetchLoginStatus, fetchUsersData, fetchMessageData } from './services';\nimport Message from './Message';\nimport Navigation from './Navigation';\nimport useInterval from './Interval';\nimport NewMessage from './NewMessage';\nimport errorMessages from './errorMessages';\nimport Users from './Users';\nimport Login from './Login';\nimport './app.css';\n\nconst App = () => {\n  const [errorState, setErrorMessage] = useState('');\n  const [userListState, setUserList] = useState([]);\n  const [userState, setLoggedInState] = useState({\n    isLoggedIn: false\n  });\n  const [messageState, setMessage] = useState([]);\n  const getChats = useCallback(() => {\n    getUsers();\n    getMessages();\n  }, []);\n  useEffect(() => {\n    fetchLoginStatus().then(userInfo => {\n      setLoggedInState({\n        isLoggedIn: true,\n        username: userInfo.username\n      });\n\n      if (userState.isLoggedIn) {\n        getChats();\n      }\n\n      setErrorMessage('');\n    }).catch(err => {\n      setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n    });\n  }, [getChats, userState.isLoggedIn]);\n\n  const login = username => {\n    setLoggedInState({\n      isLoggedIn: true,\n      username\n    });\n    getChats();\n  };\n\n  const logout = () => {\n    setLoggedInState({\n      isLoggedIn: false\n    });\n  };\n\n  const getUsers = () => {\n    fetchUsersData().then(usersList => {\n      setUserList(Object.values(usersList));\n    }).catch(err => {\n      setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n    });\n  };\n\n  const getMessages = () => {\n    fetchMessageData().then(messageList => {\n      setMessage(messageList);\n    }).catch(err => {\n      setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n    });\n  };\n\n  useInterval(() => {\n    if (userState.isLoggedIn) {\n      getChats();\n    }\n  }, 3000);\n  let content;\n\n  const checkError = errCode => {\n    if (errCode === 'MANDATORY_LOGIN' || errCode === 'UNAUTHORIZED_ACCESS') {\n      logout();\n    }\n  };\n\n  if (userState.isLoggedIn) {\n    content = /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NewMessage, {\n      onAddMessage: getMessages,\n      onError: checkError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"display-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Users, {\n      userList: userListState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Message, {\n      messageList: messageState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    })));\n  } else {\n    content = /*#__PURE__*/React.createElement(Login, {\n      loggedIn: login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navigation, {\n    user: userState,\n    onLogout: logout,\n    onError: checkError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, errorState), content);\n};\n\nexport default App;","map":{"version":3,"sources":["D:/Information System/info6250/assignments/react-chat/src/App.jsx"],"names":["React","useState","useEffect","useCallback","fetchLoginStatus","fetchUsersData","fetchMessageData","Message","Navigation","useInterval","NewMessage","errorMessages","Users","Login","App","errorState","setErrorMessage","userListState","setUserList","userState","setLoggedInState","isLoggedIn","messageState","setMessage","getChats","getUsers","getMessages","then","userInfo","username","catch","err","code","login","logout","usersList","Object","values","messageList","content","checkError","errCode"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { fetchLoginStatus, fetchUsersData, fetchMessageData } from './services';\nimport Message from './Message';\nimport Navigation from './Navigation';\nimport useInterval from './Interval';\nimport NewMessage from './NewMessage';\nimport errorMessages from './errorMessages';\nimport Users from './Users';\nimport Login from './Login';\nimport './app.css';\n\nconst App = () => {\n  const [errorState, setErrorMessage] = useState('');\n  const [userListState, setUserList] = useState([]);\n  const [userState, setLoggedInState] = useState({ isLoggedIn: false });\n  const [messageState, setMessage] = useState([]);\n  \n\n  const getChats = useCallback(() => {\n    getUsers();\n    getMessages();\n  }, []);\n\n  useEffect(() => {\n    fetchLoginStatus()\n      .then(userInfo => {\n        setLoggedInState({\n          isLoggedIn: true,\n          username: userInfo.username\n        });\n        if (userState.isLoggedIn) {\n          getChats();\n        }\n        setErrorMessage('');\n      })\n      .catch(err => {\n        setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n      });\n  }, [getChats, userState.isLoggedIn]);\n\n  const login = username => {\n    setLoggedInState({\n      isLoggedIn: true,\n      username\n    });\n    getChats();\n  };\n\n  const logout = () => {\n    setLoggedInState({\n      isLoggedIn: false\n    });\n  };\n\n  const getUsers = () => {\n    fetchUsersData()\n      .then(usersList => {\n        setUserList(Object.values(usersList));\n      })\n      .catch(err => {\n        setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n      });\n  };\n\n  const getMessages = () => {\n    fetchMessageData()\n      .then(messageList => {\n        setMessage(messageList);\n      })\n      .catch(err => {\n        setErrorMessage(errorMessages[err.code || 'DEFAULT']);\n      });\n  };\n\n  useInterval(() => {\n    if (userState.isLoggedIn) {\n      getChats();\n    }\n  }, 3000);\n\n  let content;\n\n  const checkError = errCode => {\n    if (errCode === 'MANDATORY_LOGIN' || errCode === 'UNAUTHORIZED_ACCESS') {\n      logout();\n    }\n  };\n\n  if (userState.isLoggedIn) {\n    content = (\n      <React.Fragment>\n        <NewMessage onAddMessage={getMessages} onError={checkError} />\n        <div className=\"display-container\">\n          <Users userList={userListState} />\n          <Message messageList={messageState} />\n        </div>\n      </React.Fragment>\n    );\n  } else {\n    content = <Login loggedIn={login} />;\n  }\n\n  return (\n    <div className=\"app\">\n      <Navigation user={userState} onLogout={logout} onError={checkError} />\n      <p>{errorState}</p>\n      {content}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}