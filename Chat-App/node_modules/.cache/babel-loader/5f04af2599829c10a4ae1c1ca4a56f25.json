{"ast":null,"code":"import _slicedToArray from\"D:\\\\Information System\\\\info6250\\\\assignments\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{fetchLoginPage}from'./services';import errorMessages from'./errorMessages';import loadingIcon from\"./spinner.svg\";var LoginPage=function LoginPage(_ref){var loggedIn=_ref.loggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUser=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var performLogin=function performLogin(){if(!username){setErrorMessage(errorMessages.MANDATORY_USERNAME);return;}setErrorMessage('');setLoading(true);fetchLoginPage(username).then(function(userInfo){loggedIn(userInfo.username);}).catch(function(err){setErrorMessage(errorMessages[err.code||'DEFAULT']);setLoading(false);setUser('');});};var onChange=function onChange(e){return setUser(e.target.value);};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),/*#__PURE__*/React.createElement(\"input\",{onChange:onChange,value:username}),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"loadingIcon\",src:loadingIcon}):/*#__PURE__*/React.createElement(\"button\",{onClick:performLogin},\"Login\"));};export default LoginPage;","map":{"version":3,"sources":["D:/Information System/info6250/assignments/react-chat/src/LoginPage.jsx"],"names":["React","useState","fetchLoginPage","errorMessages","LoginPage","loggedIn","error","setErrorMessage","username","setUser","isLoading","setLoading","performLogin","MANDATORY_USERNAME","then","userInfo","catch","err","code","onChange","e","target","value","loadingIcon"],"mappings":"qLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,cAAT,KAA+B,YAA/B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,C,uCAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,eACDJ,QAAQ,CAAC,EAAD,CADP,wCAC3BK,KAD2B,eACpBC,eADoB,8BAENN,QAAQ,CAAC,EAAD,CAFF,yCAE3BO,QAF2B,eAEjBC,OAFiB,8BAGFR,QAAQ,CAAC,KAAD,CAHN,yCAG3BS,SAH2B,eAGhBC,UAHgB,eAMlC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAI,CAACJ,QAAL,CAAe,CACbD,eAAe,CAACJ,aAAa,CAACU,kBAAf,CAAf,CACA,OACD,CACDN,eAAe,CAAC,EAAD,CAAf,CACAI,UAAU,CAAC,IAAD,CAAV,CACAT,cAAc,CAACM,QAAD,CAAd,CACGM,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBV,QAAQ,CAACU,QAAQ,CAACP,QAAV,CAAR,CACD,CAHH,EAIGQ,KAJH,CAIS,SAAAC,GAAG,CAAI,CACZV,eAAe,CAACJ,aAAa,CAACc,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAf,CACAP,UAAU,CAAC,KAAD,CAAV,CACAF,OAAO,CAAC,EAAD,CAAP,CACD,CARH,EASD,CAhBD,CAkBA,GAAMU,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,QAAIX,CAAAA,OAAO,CAACW,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAAlB,CAEA,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,OAAb,EAAsBhB,KAAtB,CADF,cAEE,6BAAO,QAAQ,CAAEa,QAAjB,CAA2B,KAAK,CAAEX,QAAlC,EAFF,CAGGE,SAAS,cACR,2BAAK,GAAG,CAAC,aAAT,CAAuB,GAAG,CAAEa,WAA5B,EADQ,cAGR,8BAAQ,OAAO,CAAEX,YAAjB,UANJ,CADF,CAWD,CArCD,CAuCA,cAAeR,CAAAA,SAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { fetchLoginPage } from './services';\r\nimport errorMessages from './errorMessages';\r\nimport loadingIcon from './spinner.svg';\r\n\r\nconst LoginPage = ({ loggedIn }) => {\r\n  const [error, setErrorMessage] = useState('');\r\n  const [username, setUser] = useState('');\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n\r\n  const performLogin = () => {\r\n    if (!username) {\r\n      setErrorMessage(errorMessages.MANDATORY_USERNAME);\r\n      return;\r\n    }\r\n    setErrorMessage('');\r\n    setLoading(true);\r\n    fetchLoginPage(username)\r\n      .then(userInfo => {\r\n        loggedIn(userInfo.username);\r\n      })\r\n      .catch(err => {\r\n        setErrorMessage(errorMessages[err.code || 'DEFAULT']);\r\n        setLoading(false);\r\n        setUser('');\r\n      });\r\n  };\r\n\r\n  const onChange = e => setUser(e.target.value);\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <p className=\"error\">{error}</p>\r\n      <input onChange={onChange} value={username} />\r\n      {isLoading ? (\r\n        <img alt=\"loadingIcon\" src={loadingIcon} />\r\n      ) : (\r\n        <button onClick={performLogin}>Login</button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}