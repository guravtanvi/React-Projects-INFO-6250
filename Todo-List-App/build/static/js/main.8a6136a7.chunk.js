(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/spinner.05360875.svg"},,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),o=a.n(r),s=(a(15),c.a.createContext({})),l=function(){var e=Object(n.useContext)(s);Object(n.useEffect)((function(){e.getTheme(e.username)}),[]);return c.a.createElement("select",{className:"theme",value:e.theme,onChange:function(t){var a=t.target.value;e.setTheme(e.username,a)}},c.a.createElement("option",{value:"dark"},"Dark-Theme"),c.a.createElement("option",{value:"light"},"Light-Theme"),c.a.createElement("option",{value:"cool"},"Cool-Theme"))},i=a(3),u=function(){var e=Object(n.useContext)(s);return c.a.createElement("span",{className:"sort-container"},c.a.createElement("label",{className:"task-sort-label"},"Sort By:"),c.a.createElement("span",{className:"select-sort"},c.a.createElement("label",null),c.a.createElement("select",{className:"sort-alphabetically filter-height",value:e.taskOrderFilter,onChange:function(t){e.sortTasksByOrder(t.target.value)}},c.a.createElement("option",{value:"select option",disabled:!0},"Select"),c.a.createElement("option",{value:"ascending"},"Ascending"),c.a.createElement("option",{value:"descending"},"Descending")),c.a.createElement("label",null,"Task Done/Task Not-Done"),c.a.createElement("select",{className:"sort-by-status filter-height",value:e.taskDoneFilter,onChange:function(t){e.sortTasksByDone(t.target.value)}},c.a.createElement("option",{value:"select option",disabled:!0},"Select"),c.a.createElement("option",{value:"done"},"Done"),c.a.createElement("option",{value:"notdone"},"Not Done"))))},d=function(){var e=Object(n.useContext)(s);return c.a.createElement("div",{className:"filter"},c.a.createElement("span",{className:"filter-container"},c.a.createElement("label",{className:"filter-label"},"Filter:"),c.a.createElement("select",{className:"filter-task filter-height",value:e.taskStatusFilter,onChange:function(t){e.filterTasksByStatus(t.target.value)}},c.a.createElement("option",{value:"all"},"All Tasks"),c.a.createElement("option",{value:"active"},"Active Tasks"),c.a.createElement("option",{value:"complete"},"Complete Tasks"))),c.a.createElement(u,null))},E={DONE:"done",ALL:"all",SELECT:"select option",ACTIVE:"active",COMPLETE:"complete",ASCENDING:"ascending",DESCENDING:"descending",NOTDONE:"notdone",DEFAULT_THEME:"light",TRUE:!0,FALSE:!1},m=function(){var e=Object(n.useContext)(s),t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){e.getAllTasks(e.username)}),[]);var l=function(t){e.toggleTodo(t.target.id)},u=function(t){e.updateTask(t.target.id,t.target.value)},m=function(t){e.deleteTask(t.target.id)};return c.a.createElement("div",null,c.a.createElement("div",{className:"todo-container"},c.a.createElement(d,null),c.a.createElement("div",{className:"add-todo-container"},c.a.createElement("input",{className:"todo-input",onChange:function(e){return o(e.target.value)},value:r,type:"text",placeholder:"Enter Todo Task here"}),c.a.createElement("button",{className:"btn-todo-add",onClick:function(t){t.preventDefault(),e.addNewTask(e.username,r),o("")}},"Add Task"),c.a.createElement("button",{className:"btn-refresh",onClick:function(){e.getAllTasks(e.username),e.refreshTasks()}},"Refresh"),c.a.createElement("div",{className:"todo-display"},c.a.createElement("ul",null,Object.values(e.tasks).filter((function(t){return e.taskStatusFilter===E.COMPLETE?t.done===E.TRUE:E.TRUE})).filter((function(t){return e.taskStatusFilter===E.ACTIVE?t.done===E.FALSE:E.TRUE})).map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("input",{id:e.taskId,className:"todo-checkbox",type:"checkbox",checked:e.done?"checked":"",onChange:l}),c.a.createElement("input",{type:"text",id:e.taskId,className:"todo ".concat(e.done?"todo complete":"todo"),value:e.name,onChange:u,contentEditable:"true"}),c.a.createElement("button",{id:e.taskId,className:"task-delete",onClick:m},"X"))})))))))},O=a(8),T=a.n(O),f=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],E=Object(n.useContext)(s);return c.a.createElement("div",{className:"login-page"},c.a.createElement("input",{className:"user-details",placeholder:"Enter Login Username",onChange:function(e){return d(e.target.value)}}),a?c.a.createElement("img",{alt:"loadinglogo",src:T.a}):c.a.createElement("button",{className:"login-button",onClick:function(){r(!0),E.setLoginStatus(u),r(!1)}},"Login"))},h=function(){var e,t=Object(n.useContext)(s);return Object(n.useEffect)((function(){t.getLoginStatus()}),[]),e=t.isLoggedIn?c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"welcome-note"},"Welcome, ",t.username.toUpperCase(),"!!   Pick Your Theme:",c.a.createElement(l,null)),c.a.createElement("p",{className:"error-note"},t.error),c.a.createElement(m,null)):c.a.createElement(f,null),c.a.createElement("div",null,e)},k=function(){var e=Object(n.useContext)(s);return c.a.createElement("div",null,c.a.createElement("div",{className:"header"},"MANAGE TODO LIST"),c.a.createElement("div",{className:"error-note"},e.networkError),c.a.createElement("ul",{className:"nav"},e.isLoggedIn&&c.a.createElement("li",{className:"logout action",onClick:function(){e.setLogout()}},"Logout")))},p=(a(16),function(){var e=Object(n.useContext)(s);return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"app ".concat(e.theme?e.theme:"")},c.a.createElement(k,null),c.a.createElement(h,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(1),R=a(2),b=a(9),S=function(e,t){switch(e=Object(g.a)({},e,{error:"",networkError:""}),t.type){case"GET_SESSION":return t.data.username?Object(g.a)({},e,{isLoggedIn:E.TRUE,username:t.data.username,theme:t.data.theme}):Object(g.a)({},e,{isLoggedIn:E.FALSE});case"SET_SESSION":return Object(g.a)({},e,{username:t.data,isLoggedIn:E.TRUE});case"SET_LOGOUT":return Object(g.a)({},e,{isLoggedIn:E.FALSE,tasks:{},theme:E.DEFAULT_THEME});case"GET_THEME":case"SET_THEME":return Object(g.a)({},e,{theme:t.data});case"GET_TODO":return Object(g.a)({},e,{tasks:t.data});case"SET_TODO":return Object(g.a)({},e,{tasks:Object(g.a)({},e.tasks,Object(R.a)({},t.data.taskId,{name:t.data.name,done:t.data.done,taskId:t.data.taskId}))});case"TOGGLE_TODO":return Object(g.a)({},e,{tasks:Object(g.a)({},e.tasks,Object(R.a)({},t.data.taskId,Object(g.a)({},t.data)))});case"DELETE_TODO":return Object(g.a)({},e,{tasks:t.data});case"UPDATE_TODO":return Object(g.a)({},e,{tasks:Object(g.a)({},e.tasks,Object(R.a)({},t.data.taskId,Object(g.a)({},t.data,{name:t.data.name})))});case"STATUS_FILTER":return Object(g.a)({},e,{taskStatusFilter:t.data});case"ORDER_FILTER":return Object(g.a)({},e,{taskOrderFilter:t.data});case"REFRESH_TASKS":return Object(g.a)({},e,{taskStatusFilter:E.ALL,taskOrderFilter:E.SELECT,taskDoneFilter:E.SELECT});case"DONE_FILTER":return Object(g.a)({},e,{taskDoneFilter:t.data.status,taskStatusFilter:E.ALL,taskOrderFilter:E.SELECT});case"REPORT_ERROR":return Object(g.a)({},e,{error:t.data});case"NETWORK_ERROR":return Object(g.a)({},e,{networkError:t.data,isLoggedIn:E.FALSE});default:return e}},v={DEFAULT:"Oops! Something went wrong, please try again!",NETWORK_ERROR:"Problem connecting to your network, please try again!",USERNAME_MANDATORY:"* Username is mandatory",TASK_MANDATORY:"* Task name cannot be empty!","action not permitted":"Unauthorized user. Please try valid username!","login denied":"* Login required to see the content.","failed to update":"Failed to update task! Please enter correct data.","no such taskId":"Error! Task does not exist.","no valid session":"No Session found! Please login again.","no tasks for user":"No tasks found!"},N=function(e){return{code:"NETWORK-ERROR",err:e}},j=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},y=function(e,t,a){return fetch("/tasks/".concat(e,"/").concat(t),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:a})}).catch(N).then(j)},L=function(e){var t={isLoggedIn:!1,username:"",theme:"",tasks:{},taskOrderFilter:E.SELECT,taskStatusFilter:E.ALL,taskDoneFilter:E.SELECT,error:"",networkError:""},a=Object(n.useReducer)(S,t),r=Object(i.a)(a,2),o=r[0],l=r[1],u=function(e){return Object.assign.apply(Object,[{}].concat(Object(b.a)(Object.entries(o.tasks).filter((function(t){return Object(i.a)(t,1)[0]!==e.taskId})).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(R.a)({},a,n)})))))},d=function(){return Object.values(o.tasks).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},m=function(){return Object.values(o.tasks).sort((function(e,t){return e.name<t.name?1:e.name>t.name?-1:0}))},O=function(e){return e.reduce((function(e,t){return Object(g.a)({},e,Object(R.a)({},t.taskId,t))}),{})},T=function(){return Object.values(o.tasks).sort((function(e,t){return e.done<t.done?1:e.done>t.done?-1:0}))},f=function(){return Object.values(o.tasks).sort((function(e,t){return e.done<t.done?-1:e.done>t.done?1:0}))};return c.a.createElement(s.Provider,{value:{isLoggedIn:o.isLoggedIn,username:o.username,theme:o.theme,tasks:o.tasks,taskOrderFilter:o.taskOrderFilter,taskStatusFilter:o.taskStatusFilter,taskDoneFilter:o.taskDoneFilter,error:o.error,networkError:o.networkError,getLoginStatus:function(){fetch("/session",{method:"GET"}).catch(N).then(j).then((function(e){l({type:"GET_SESSION",data:e.data})})).catch((function(e){l({type:"NETWORK_ERROR",data:v[e.code]})}))},setLoginStatus:function(e){e?function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(N).then(j)}(e).then((function(){l({type:"SET_SESSION",data:e})})).catch((function(e){l({type:"NETWORK_ERROR",data:v[e.code]})})):l({type:"NETWORK_ERROR",data:v.USERNAME_MANDATORY})},setTheme:function(e,t){(function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({theme:t})}).catch(N).then(j)})(e,t).then((function(){l({type:"SET_THEME",data:t})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},getTheme:function(e){(function(e){return fetch("/theme/".concat(e),{method:"GET"}).catch(N).then(j)})(e).then((function(e){l({type:"GET_THEME",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},setLogout:function(){fetch("/session",{method:"DELETE"}).catch(N).then(j).then((function(){l({type:"SET_LOGOUT"})})).catch((function(e){l({type:"NETWORK_ERROR",data:v[e.code]})}))},getAllTasks:function(e){(function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch(N).then(j)})(e).then((function(e){l({type:"GET_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},addNewTask:function(e,t){t?function(e,t){return fetch("/tasks/".concat(e),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:t})}).catch(N).then(j)}(e,{name:t,done:!1}).then((function(e){l({type:"SET_TODO",data:e.data})})).catch((function(e){l({type:"NETWORK_ERROR",data:v[e.message]})})):l({type:"REPORT_ERROR",data:v.TASK_MANDATORY})},toggleTodo:function(e){o.tasks[e].done=!o.tasks[e].done;var t=o.tasks[e];y(o.username,e,t).then((function(e){l({type:"TOGGLE_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},deleteTask:function(e){var t,a;(t=o.username,a=e,fetch("/tasks/".concat(t,"/").concat(a),{method:"DELETE"}).catch(N).then(j)).then((function(e){var t=u(e.data);l({type:"DELETE_TODO",data:t})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},updateTask:function(e,t){var a=o.tasks[e];o.tasks[e].name=t,y(o.username,e,a).then((function(e){l({type:"UPDATE_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:v[e.code]})}))},filterTasksByStatus:function(e){l({type:"STATUS_FILTER",data:e})},sortTasksByOrder:function(e){var t="";e===E.ASCENDING?t=d():e===E.DESCENDING&&(t=m()),o.tasks=O(t),l({type:"ORDER_FILTER",data:e})},refreshTasks:function(){l({type:"REFRESH_TASKS"})},sortTasksByDone:function(e){var t={};e===E.DONE?t=T():e===E.NOTDONE&&(t=f()),o.tasks=O(t),l({type:"DONE_FILTER",data:e})}}},e.children)};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(L,null,c.a.createElement(p,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.8a6136a7.chunk.js.map